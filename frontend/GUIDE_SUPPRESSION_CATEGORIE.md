# ğŸ—‘ï¸ Guide : Suppression de CatÃ©gories

## ğŸ“‹ Vue d'ensemble

L'utilisateur peut maintenant **supprimer une catÃ©gorie** en deux Ã©tapes :
1. **Ouvrir la modale** â†’ Onglet "GÃ©rer"
2. **Cliquer sur le bouton poubelle** pour supprimer

---

## ğŸ¨ Interface de suppression

### **Avant de pouvoir supprimer**

Pour accÃ©der Ã  la gestion des catÃ©gories:

```
PRODUITS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”½ FILTRES                  â”‚
â”‚                             â”‚
â”‚ CatÃ©gorie                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ajouter une categorie â—„â”€â”€ Cliquer ici
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
```

### **Modale s'ouvre**

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ• Ajouter une Categorie              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                      â”‚
    â”‚  [â• Ajouter]  [ğŸ“‹ GÃ©rer] â—„ ONGLET   â”‚
    â”‚                                      â”‚
    â”‚  Onglet "Ajouter" par dÃ©faut...      â”‚
    â”‚                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Cliquer sur l'onglet "GÃ©rer"**

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ• Ajouter une Categorie              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                      â”‚
    â”‚  [â• Ajouter]  [ğŸ“‹ GÃ©rer] â—„ SÃ‰LECTIONNÃ‰
    â”‚                                      â”‚
    â”‚  ğŸ“‹ Liste des catÃ©gories             â”‚
    â”‚                                      â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚ Boissons      (3 produits)  [ğŸ—‘ï¸]â”‚ â”‚
    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚  â”‚ Snacks        (2 produits)  [ğŸ—‘ï¸]â”‚ â”‚
    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚  â”‚ Alimentaire   (5 produits)  [ğŸ—‘ï¸]â”‚ â”‚
    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚  â”‚ HygiÃ¨ne       (1 produit)   [ğŸ—‘ï¸]â”‚ â”‚
    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
    â”‚  â”‚ Ã‰lectronique  (0 produit)   [ğŸ—‘ï¸]â”‚ â”‚ â† Peut Ãªtre supprimÃ©e
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                      â”‚
    â”‚           [Fermer]                   â”‚
    â”‚                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Processus de suppression

### **Cas 1: CatÃ©gorie SANS produit (Suppression possible)**

```
Utilisateur clique ğŸ—‘ï¸ sur "Ã‰lectronique" (0 produit)
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ÃŠtes-vous sÃ»r de vouloir supprimer  â”‚
  â”‚ la catÃ©gorie "Ã‰lectronique" ?       â”‚
  â”‚                                     â”‚
  â”‚ [Annuler]  [Supprimer]             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (Clic Supprimer)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ“ CatÃ©gorie "Ã‰lectronique"  â”‚
  â”‚   supprimÃ©e avec succÃ¨s     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
  La catÃ©gorie disparaÃ®t de la liste
  Notification affichÃ©e (3-4 sec)
```

**RÃ©sultat:**
- âœ… CatÃ©gorie supprimÃ©e de `categoriesData`
- âœ… SÃ©lects mis Ã  jour (filtre, formulaire)
- âœ… Liste rafraÃ®chie
- âœ… Notification de succÃ¨s

---

### **Cas 2: CatÃ©gorie AVEC produits (Suppression impossible)**

```
Utilisateur clique ğŸ—‘ï¸ sur "Boissons" (3 produits)
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âŒ Impossible de supprimer "Boissons": â”‚
  â”‚    3 produit(s) utilisent cette      â”‚
  â”‚    catÃ©gorie                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
  Notification d'erreur affichÃ©e (3-4 sec)
  Onglet reste ouvert
  Utilisateur peut essayer autre chose
```

**Raison:** Ã‰viter les donnÃ©es orphelines

---

### **Cas 3: Annuler la suppression**

```
Utilisateur clique ğŸ—‘ï¸ sur une catÃ©gorie
         â†“
  Dialog confirmation apparaÃ®t
         â†“
  Utilisateur clique [Annuler]
         â†“
  Dialog ferme
  Rien n'est supprimÃ©
  Liste inchangÃ©e
```

---

## ğŸ“Š Tableau des statuts

| CatÃ©gorie | Produits | Action | RÃ©sultat |
|-----------|----------|--------|----------|
| Ã‰lectronique | 0 | Clic ğŸ—‘ï¸ â†’ Confirmer | âœ… SupprimÃ©e |
| Boissons | 3 | Clic ğŸ—‘ï¸ | âŒ Erreur affichÃ©e |
| HygiÃ¨ne | 1 | Clic ğŸ—‘ï¸ â†’ Confirmer | âŒ Erreur affichÃ©e |

---

## ğŸ”§ Code JavaScript - Fonctions

### **1. Afficher la liste des catÃ©gories**

```javascript
function afficherListeCategories() {
    const listeContainer = document.getElementById('listeCategories');
    if (!listeContainer) return;

    let html = '<div class="categories-list">';
    
    if (categoriesData.length === 0) {
        html += '<p>Aucune catÃ©gorie</p>';
    } else {
        categoriesData.forEach((cat, index) => {
            // Compter les produits utilisant cette catÃ©gorie
            const nbProduits = produitsData.filter(
                p => p.categorie.toLowerCase() === cat.toLowerCase()
            ).length;
            
            // CrÃ©er item avec bouton supprimer
            html += `
                <div class="categorie-item">
                    <div class="categorie-info">
                        <span class="categorie-nom">${cat}</span>
                        <span class="categorie-count">
                            ${nbProduits} produit${nbProduits !== 1 ? 's' : ''}
                        </span>
                    </div>
                    <button class="btn-supprimer-categorie" 
                            onclick="supprimerCategorie('${cat}')"
                            title="Supprimer">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>
            `;
        });
    }
    
    html += '</div>';
    listeContainer.innerHTML = html;
}
```

### **2. Supprimer une catÃ©gorie**

```javascript
function supprimerCategorie(categorie) {
    // VÃ©rifier si la catÃ©gorie est utilisÃ©e
    const produitsConcerned = produitsData.filter(
        p => p.categorie.toLowerCase() === categorie.toLowerCase()
    );
    
    // Si la catÃ©gorie est utilisÃ©e â†’ Erreur
    if (produitsConcerned.length > 0) {
        afficherNotification(
            `Impossible de supprimer "${categorie}": 
             ${produitsConcerned.length} produit(s) utilise(nt) cette catÃ©gorie`,
            'error'
        );
        return;
    }

    // Demander confirmation
    const confirmation = confirm(
        `ÃŠtes-vous sÃ»r de vouloir supprimer la catÃ©gorie "${categorie}" ?`
    );
    
    if (!confirmation) {
        return; // Utilisateur a annulÃ©
    }

    // Supprimer la catÃ©gorie
    const indexCategorie = categoriesData.findIndex(
        cat => cat.toLowerCase() === categorie.toLowerCase()
    );
    
    if (indexCategorie !== -1) {
        // Retirer de la liste
        categoriesData.splice(indexCategorie, 1);
        
        // Mettre Ã  jour toutes les interfaces
        mettreAJourSelectCategories();
        
        // Afficher notification
        afficherNotification(
            `CatÃ©gorie "${categorie}" supprimÃ©e avec succÃ¨s`,
            'success'
        );
    }
}
```

### **3. Basculer entre onglets**

```javascript
function basculerTabCategorie(tab) {
    const tabAjouter = document.getElementById('tabAjouter');
    const tabGerer = document.getElementById('tabGerer');
    const btnAjouter = document.querySelector('.categorie-tabs .tab-btn:first-child');
    const btnGerer = document.querySelector('.categorie-tabs .tab-btn:last-child');

    if (tab === 'ajouter') {
        // Afficher onglet Ajouter
        tabAjouter.classList.add('active');
        tabGerer.classList.remove('active');
        btnAjouter.classList.add('tab-active');
        btnGerer.classList.remove('tab-active');
        
    } else if (tab === 'gerer') {
        // Afficher onglet GÃ©rer
        tabAjouter.classList.remove('active');
        tabGerer.classList.add('active');
        btnAjouter.classList.remove('tab-active');
        btnGerer.classList.add('tab-active');
        
        // RafraÃ®chir la liste des catÃ©gories
        afficherListeCategories();
    }
}
```

---

## ğŸ¨ Ã‰lÃ©ments HTML

### **Nouveaux Ã©lÃ©ments ajoutÃ©s:**

```html
<!-- Onglets -->
<div class="categorie-tabs">
    <button class="tab-btn tab-active" onclick="basculerTabCategorie('ajouter')">
        <i class="fa-solid fa-plus"></i> Ajouter
    </button>
    <button class="tab-btn" onclick="basculerTabCategorie('gerer')">
        <i class="fa-solid fa-list"></i> GÃ©rer
    </button>
</div>

<!-- Onglet Ajouter (original) -->
<div id="tabAjouter" class="categorie-tab-content active">
    <form id="formCategorie">
        <!-- ... formulaire ... -->
    </form>
</div>

<!-- Onglet GÃ©rer (nouveau) -->
<div id="tabGerer" class="categorie-tab-content">
    <h3>ğŸ“‹ Liste des catÃ©gories</h3>
    <div id="listeCategories" class="liste-categories"></div>
</div>
```

---

## ğŸ¨ CSS Styles

### **Onglets**
- Fond transparent avec border-bottom
- Couleur active: Primaire (#C41E3A)
- Transition lisse 0.2s

### **Liste des catÃ©gories**
- Items avec flex layout
- IcÃ´ne ğŸ—‘ï¸ Ã  droite
- Compter des produits affichÃ©e
- Hover: fond gris clair

### **Bouton poubelle**
- Couleur: Rouge (#dc3545)
- Hover: Rouge foncÃ© (#c82333)
- Active: Scale(0.95) feedback

---

## ğŸ”’ Validation et sÃ©curitÃ©

| ContrÃ´le | VÃ©rification |
|----------|-------------|
| **CatÃ©gorie utilisÃ©e** | `produitsData.filter()` compte produits |
| **Case-insensitive** | `.toLowerCase()` pour comparaison |
| **Confirmation dialog** | `confirm()` native du navigateur |
| **Double check** | `findIndex()` avant suppression |

---

## ğŸ“± Responsive

- âœ… Desktop: Liste complÃ¨te avec boutons
- âœ… Tablet: Layout ajustÃ©
- âœ… Mobile: MÃªme fonctionnalitÃ©

---

## ğŸ§ª ScÃ©narios de test

### **Test 1: Supprimer catÃ©gorie sans produit**
```
1. Ajouter une catÃ©gorie "Test"
2. Cliquer onglet "GÃ©rer"
3. Voir "Test" dans la liste (0 produits)
4. Cliquer ğŸ—‘ï¸
5. Confirmer suppression
6. VÃ©rifier: âœ“ Disparue âœ“ Notification âœ“ Selects mis Ã  jour
```

### **Test 2: Essayer supprimer catÃ©gorie avec produit**
```
1. Aller Ã  l'onglet "GÃ©rer"
2. Voir "Boissons" (3 produits)
3. Cliquer ğŸ—‘ï¸
4. VÃ©rifier: âŒ Erreur affichÃ©e âœ“ Liste inchangÃ©e
```

### **Test 3: Annuler suppression**
```
1. Aller Ã  l'onglet "GÃ©rer"
2. Cliquer ğŸ—‘ï¸ sur une catÃ©gorie
3. Cliquer [Annuler] dans dialog
4. VÃ©rifier: âœ“ Rien supprimÃ© âœ“ Liste inchangÃ©e
```

---

## ğŸ“Š Ã‰tats possibles

| Ã‰tat | Description |
|------|-------------|
| **Avant suppression** | CatÃ©gorie visible dans liste avec count |
| **Dialog confirmation** | Modale native demande confirmation |
| **Erreur (utilisÃ©e)** | Notification rouge, liste inchangÃ©e |
| **SuccÃ¨s** | Notification verte, catÃ©gorie disparue |

---

## ğŸš€ Points clÃ©s

| Point | DÃ©tail |
|-------|--------|
| **Endroit** | Onglet "GÃ©rer" de la modale |
| **Bouton** | IcÃ´ne poubelle ğŸ—‘ï¸ (rouge) |
| **Confirmation** | Dialog natif du navigateur |
| **Validation** | VÃ©rif si catÃ©gorie utilisÃ©e |
| **Notification** | Erreur ou SuccÃ¨s |
| **Mise Ã  jour** | Selects + liste rafraÃ®chis |

---

## ğŸ’¡ AmÃ©liorations futures possibles

1. **Fusion de catÃ©gories** - TransfÃ©rer produits avant suppression
2. **Soft delete** - Archiver au lieu de supprimer
3. **Batch delete** - Supprimer plusieurs catÃ©gories
4. **Export** - TÃ©lÃ©charger liste avant suppression
5. **Historique** - Log des suppressions

